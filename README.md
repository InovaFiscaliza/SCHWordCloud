# SCHWordCloud

SCHWordCloud is a tool that generates word clouds based on search results related to SCH (Sistema de Certificação e Homologação) product certification data from ANATEL (Brazil's National Telecommunications Agency).

## Overview

This project fetches product certification data, performs web searches using Google and Bing APIs, and generates word clouds based on the search results. The tool also manages annotations and maintains a history of search results.

## Features

- Downloads and processes SCH database from ANATEL
- Performs web searches using Google Search API
- Generates word clouds from search results
- Maintains annotation history for search results
- Supports cloud-based annotation sharing
- Configurable through TOML configuration files
- Comprehensive logging system

## Installation

```bash
pip install schwordcloud
```

Or clone the repository and install:

```bash
git clone https://github.com/maxwelfreitas/SCHWordCloud.git
cd SCHWordCloud
pip install -e .
```

## Usage

### Command Line Interface

```bash
schwordcloud [-C CONFIG_FILE] [-V]
```

Options:
- `-C, --config_file`: Path to the configuration file. If not provided, the default config will be used.
- `-V, --verbose`: Increase output verbosity.

### Configuration

The application requires a configuration file in TOML format with the following sections:

1. **Cloud Configuration**
   ```toml
   [cloud]
   cloud_annotation_get_folder = "path/to/cloud/annotation/get/folder"
   cloud_annotation_post_folder = "path/to/cloud/annotation/post/folder"
   ```

2. **API Credentials**
   ```toml
   [credentials]
   credentials_file = "path/to/credentials/file"
   ```

   The credentials file should contain API keys for Google and Bing search:
   ```toml
   [api_credentials.google_search.maxwelfreitas]
   api_key = "your-google-api-key"
   engine_id = "your-google-engine-id"

   [api_credentials.bing_search.maxwelfreitas]
   api_key = "your-bing-api-key"
   ```

## Data Structure

The application creates the following directory structure:

```
schwordcloud/                           # The main folder for the schwordcloud data_home
└── datasets/                           # The data home folder
    ├── annotation/                     # Contains the .xlsx annotation files
    |   ├── Annotation.xlsx             # A copy of the cloud annotation file
    |   └── AnnotationNull.xlsx         # The null annotation file generated by the user
    ├── sch/                            # Contains the SCH database file
    |   └── produtos_certificados.zip   # SCH database file fetched from ANATEL
    └── search_results/                 # Contains search results data
        └── search_history.parquet      # Search history in Parquet format
```

## How It Works

1. The application downloads the latest SCH database from ANATEL
2. It extracts product certification information
3. For each certification number, it performs web searches
4. Search results are processed to generate word clouds
5. Results are saved as annotations with metadata
6. Annotations can be shared through cloud folders

## Development

### Project Structure

- `src/schwordcloud/`: Main package
  - `datamanager/`: Data management modules
  - `websearch/`: Web search API integrations
  - `config.py`: Configuration handling
  - `schwordcloud.py`: Main application class
  - `runschwordcloud.py`: CLI entry point

### Logging

The application logs information to both a file (`schwordcloud.log`) and the console when verbose mode is enabled.

## License

[License information]

## Author

Maxwell Freitas
